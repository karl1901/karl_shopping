import{q as e,t,v as n,w as o,x as u,y as s,z as a,A as r,B as l,C as i,D as c,T as d,F as p,G as m,H as V,I as f,J as g,K as y,L as v,M as C,N as x,O as h}from"./index-fa007f95.js";import{m as b}from"./typescript-5028724d.js";const k=e({a11y:{type:Boolean,default:!0},locale:{type:t(Object)},size:n,button:{type:t(Object)},experimentalFeatures:{type:t(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:t(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),B={};Vue.defineComponent({name:"ElConfigProvider",props:k,setup(e,{slots:t}){Vue.watch((()=>e.message),(e=>{Object.assign(B,null!=e?e:{})}),{immediate:!0,deep:!0});const n=o(e);return()=>Vue.renderSlot(t,"default",{config:null==n?void 0:n.value})}});const N=e({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),w=["textContent"],S=Vue.defineComponent({name:"ElBadge"});const z=r(a(Vue.defineComponent({...S,props:N,setup(e,{expose:t}){const n=e,o=u("badge"),a=Vue.computed((()=>n.isDot?"":s(n.value)&&s(n.max)&&n.max<n.value?`${n.max}+`:`${n.value}`));return t({content:a}),(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(Vue.unref(o).b())},[Vue.renderSlot(e.$slots,"default"),Vue.createVNode(Vue.Transition,{name:`${Vue.unref(o).namespace.value}-zoom-in-center`,persisted:""},{default:Vue.withCtx((()=>[Vue.withDirectives(Vue.createElementVNode("sup",{class:Vue.normalizeClass([Vue.unref(o).e("content"),Vue.unref(o).em("content",e.type),Vue.unref(o).is("fixed",!!e.$slots.default),Vue.unref(o).is("dot",e.isDot)]),textContent:Vue.toDisplayString(Vue.unref(a))},null,10,w),[[Vue.vShow,!e.hidden&&(Vue.unref(a)||e.isDot)]])])),_:1},8,["name"])],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]])),T=["success","info","warning","error"],E=b({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:i?document.body:void 0}),M=e({customClass:{type:String,default:E.customClass},center:{type:Boolean,default:E.center},dangerouslyUseHTMLString:{type:Boolean,default:E.dangerouslyUseHTMLString},duration:{type:Number,default:E.duration},icon:{type:l,default:E.icon},id:{type:String,default:E.id},message:{type:t([String,Object,Function]),default:E.message},onClose:{type:t(Function),required:!1},showClose:{type:Boolean,default:E.showClose},type:{type:String,values:T,default:E.type},offset:{type:Number,default:E.offset},zIndex:{type:Number,default:E.zIndex},grouping:{type:Boolean,default:E.grouping},repeatNum:{type:Number,default:E.repeatNum}}),_=Vue.shallowReactive([]),D=e=>{const{prev:t}=(e=>{const t=_.findIndex((t=>t.id===e)),n=_[t];let o;return t>0&&(o=_[t-1]),{current:n,prev:o}})(e);return t?t.vm.exposed.bottom.value:0},I=["id"],L=["innerHTML"],$=Vue.defineComponent({name:"ElMessage"});var j=a(Vue.defineComponent({...$,props:M,emits:{destroy:()=>!0},setup(e,{expose:t}){const n=e,{Close:o}=f,{ns:u,zIndex:s}=c("message"),{currentZIndex:a,nextZIndex:r}=s,l=Vue.ref(),i=Vue.ref(!1),v=Vue.ref(0);let C;const x=Vue.computed((()=>n.type?"error"===n.type?"danger":n.type:"info")),h=Vue.computed((()=>{const e=n.type;return{[u.bm("icon",e)]:e&&d[e]}})),b=Vue.computed((()=>n.icon||d[n.type]||"")),k=Vue.computed((()=>D(n.id))),B=Vue.computed((()=>((e,t)=>_.findIndex((t=>t.id===e))>0?20:t)(n.id,n.offset)+k.value)),N=Vue.computed((()=>v.value+B.value)),w=Vue.computed((()=>({top:`${B.value}px`,zIndex:a.value})));function S(){0!==n.duration&&({stop:C}=g((()=>{E()}),n.duration))}function T(){null==C||C()}function E(){i.value=!1}return Vue.onMounted((()=>{S(),r(),i.value=!0})),Vue.watch((()=>n.repeatNum),(()=>{T(),S()})),p(document,"keydown",(function({code:e}){e===y.esc&&E()})),m(l,(()=>{v.value=l.value.getBoundingClientRect().height})),t({visible:i,bottom:N,close:E}),(e,t)=>(Vue.openBlock(),Vue.createBlock(Vue.Transition,{name:Vue.unref(u).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[0]||(t[0]=t=>e.$emit("destroy")),persisted:""},{default:Vue.withCtx((()=>[Vue.withDirectives(Vue.createElementVNode("div",{id:e.id,ref_key:"messageRef",ref:l,class:Vue.normalizeClass([Vue.unref(u).b(),{[Vue.unref(u).m(e.type)]:e.type&&!e.icon},Vue.unref(u).is("center",e.center),Vue.unref(u).is("closable",e.showClose),e.customClass]),style:Vue.normalizeStyle(Vue.unref(w)),role:"alert",onMouseenter:T,onMouseleave:S},[e.repeatNum>1?(Vue.openBlock(),Vue.createBlock(Vue.unref(z),{key:0,value:e.repeatNum,type:Vue.unref(x),class:Vue.normalizeClass(Vue.unref(u).e("badge"))},null,8,["value","type","class"])):Vue.createCommentVNode("v-if",!0),Vue.unref(b)?(Vue.openBlock(),Vue.createBlock(Vue.unref(V),{key:1,class:Vue.normalizeClass([Vue.unref(u).e("icon"),Vue.unref(h)])},{default:Vue.withCtx((()=>[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(Vue.unref(b))))])),_:1},8,["class"])):Vue.createCommentVNode("v-if",!0),Vue.renderSlot(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),Vue.createElementVNode("p",{class:Vue.normalizeClass(Vue.unref(u).e("content")),innerHTML:e.message},null,10,L)],2112)):(Vue.openBlock(),Vue.createElementBlock("p",{key:0,class:Vue.normalizeClass(Vue.unref(u).e("content"))},Vue.toDisplayString(e.message),3))])),e.showClose?(Vue.openBlock(),Vue.createBlock(Vue.unref(V),{key:2,class:Vue.normalizeClass(Vue.unref(u).e("closeBtn")),onClick:Vue.withModifiers(E,["stop"])},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(o))])),_:1},8,["class","onClick"])):Vue.createCommentVNode("v-if",!0)],46,I),[[Vue.vShow,i.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let O=1;const H=e=>{const t=!e||v(e)||Vue.isVNode(e)||C(e)?{message:e}:e,n={...E,...t};if(n.appendTo){if(v(n.appendTo)){let e=document.querySelector(n.appendTo);x(e)||(e=document.body),n.appendTo=e}}else n.appendTo=document.body;return n},F=({appendTo:e,...t},n)=>{const o="message_"+O++,u=t.onClose,s=document.createElement("div"),a={...t,id:o,onClose:()=>{null==u||u(),(e=>{const t=_.indexOf(e);if(-1===t)return;_.splice(t,1);const{handler:n}=e;n.close()})(c)},onDestroy:()=>{Vue.render(null,s)}},r=Vue.createVNode(j,a,C(a.message)||Vue.isVNode(a.message)?{default:C(a.message)?a.message:()=>a.message}:null);r.appContext=n||U._context,Vue.render(r,s),e.appendChild(s.firstElementChild);const l=r.component,i={close:()=>{l.exposed.visible.value=!1}},c={id:o,vnode:r,vm:l,handler:i,props:r.component.props};return c},U=(e={},t)=>{if(!i)return{close:()=>{}};if(s(B.max)&&_.length>=B.max)return{close:()=>{}};const n=H(e);if(n.grouping&&_.length){const e=_.find((({vnode:e})=>{var t;return(null==(t=e.props)?void 0:t.message)===n.message}));if(e)return e.props.repeatNum+=1,e.props.type=n.type,e.handler}const o=F(n,t);return _.push(o),o.handler};T.forEach((e=>{U[e]=(t={},n)=>{const o=H(t);return U({...o,type:e},n)}})),U.closeAll=function(e){for(const t of _)e&&e!==t.props.type||t.handler.close()},U._context=null;const q=h(U,"$message");export{q as E};
